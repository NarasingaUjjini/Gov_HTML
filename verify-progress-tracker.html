<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Tracker Verification</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .result { padding: 10px; margin: 5px 0; border-radius: 4px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Progress Tracker Method Verification</h1>
    <div id="results"></div>

    <script src="js/storage-wrapper.js"></script>
    <script src="js/progress-tracker.js"></script>

    <script>
        function addResult(message, isSuccess) {
            const div = document.createElement('div');
            div.className = `result ${isSuccess ? 'success' : 'error'}`;
            div.textContent = message;
            document.getElementById('results').appendChild(div);
        }

        try {
            // Test ProgressTracker instantiation
            const storageWrapper = new StorageWrapper();
            const progressTracker = new ProgressTracker(storageWrapper);
            addResult('✅ ProgressTracker created successfully', true);

            // Test getUnitProgress method exists
            if (typeof progressTracker.getUnitProgress === 'function') {
                addResult('✅ getUnitProgress method exists', true);
            } else {
                addResult('❌ getUnitProgress method does not exist', false);
                throw new Error('getUnitProgress method missing');
            }

            // Test method functionality
            storageWrapper.clear();
            progressTracker.updateUnitProgress(1, 3, 5);
            
            const unitProgress = progressTracker.getUnitProgress(1);
            addResult(`✅ getUnitProgress returned: ${JSON.stringify(unitProgress)}`, true);

            // Verify the structure
            if (unitProgress.correct === 3 && unitProgress.total === 5 && unitProgress.aptitude === 60) {
                addResult('✅ getUnitProgress returns correct data structure and values', true);
            } else {
                addResult(`❌ getUnitProgress returned incorrect values: ${JSON.stringify(unitProgress)}`, false);
            }

            // Test all available methods
            const methods = Object.getOwnPropertyNames(Object.getPrototypeOf(progressTracker))
                .filter(name => typeof progressTracker[name] === 'function' && name !== 'constructor');
            
            addResult(`✅ Available methods: ${methods.join(', ')}`, true);

        } catch (error) {
            addResult(`❌ Error: ${error.message}`, false);
            console.error(error);
        }
    </script>
</body>
</html>