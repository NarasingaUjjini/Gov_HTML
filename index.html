<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="AP United States Government studying tool with unit quizzes, practice tests, and study mode">
    <meta name="keywords" content="AP Government, study tool, quiz, practice test, civics">
    <meta name="author" content="AP Government Study Tool">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#4A90E2">
    <title>AP Government Study Tool</title>
    <link rel="stylesheet" href="styles/main.css">
</head>

<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <header class="app-header">
        <h1>AP Government Study Tool</h1>
        <nav class="main-nav">
            <button id="dashboard-btn" class="nav-btn active">Dashboard</button>
        </nav>
    </header>

    <main id="main-content" class="app-main" role="main">
        <!-- Dashboard View -->
        <section id="dashboard" class="view active">
            <div class="dashboard-container">
                <div class="mode-selection">
                    <h2>Choose Your Study Mode</h2>
                    <div class="mode-buttons">
                        <button id="unit-quiz-btn" class="mode-btn"
                            aria-label="Start Unit Quiz - Focus on specific AP Government units" role="button"
                            tabindex="0">
                            <div class="mode-icon" aria-hidden="true">üìö</div>
                            <div class="mode-content">
                                <div class="mode-title">Unit Quiz</div>
                                <div class="mode-description">Focus on specific units</div>
                            </div>
                        </button>
                        <button id="practice-test-btn" class="mode-btn"
                            aria-label="Start Practice Test - Timed 55-question exam simulation" role="button"
                            tabindex="0">
                            <div class="mode-icon" aria-hidden="true">‚è±Ô∏è</div>
                            <div class="mode-content">
                                <div class="mode-title">Practice Test</div>
                                <div class="mode-description">Timed 55-question exam</div>
                            </div>
                        </button>
                        <button id="study-mode-btn" class="mode-btn"
                            aria-label="Start Study Mode - Unlimited practice with immediate feedback" role="button"
                            tabindex="0">
                            <div class="mode-icon" aria-hidden="true">üìñ</div>
                            <div class="mode-content">
                                <div class="mode-title">Study Mode</div>
                                <div class="mode-description">Unlimited practice</div>
                            </div>
                        </button>
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="progress-section">
                        <div class="section-header">
                            <h3>Exam Study Progress</h3>
                            <div class="progress-legend">
                                <span class="legend-item">
                                    <span class="legend-color aptitude"></span>
                                    Aptitude
                                </span>
                                <span class="legend-item">
                                    <span class="legend-color seen"></span>
                                    Questions Seen
                                </span>
                            </div>
                        </div>
                        <div id="progress-chart" class="progress-chart">
                            <!-- Progress bars will be dynamically generated -->
                        </div>
                        <div class="progress-summary">
                            <div class="summary-item">
                                <span class="summary-label">Overall Progress:</span>
                                <span id="overall-progress" class="summary-value">0%</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">Questions Answered:</span>
                                <span id="total-answered" class="summary-value">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-section">
                        <div class="section-header">
                            <h3>Practice Test Score Progression</h3>
                            <div class="chart-info">
                                <span id="test-count">0 tests taken</span>
                            </div>
                        </div>
                        <div id="score-chart" class="score-chart">
                            <canvas id="score-canvas" width="600" height="300"></canvas>
                            <div id="no-data-message" class="no-data-message">
                                <div class="no-data-icon">üìä</div>
                                <div class="no-data-text">Take your first practice test to see score progression</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz View -->
        <section id="quiz" class="view">
            <div class="quiz-header">
                <div class="quiz-progress">
                    <span id="question-counter" aria-live="polite">Question 1 of 55</span>
                    <div id="progress-bar-container" class="progress-bar-container" role="progressbar" aria-valuemin="0"
                        aria-valuemax="100" aria-valuenow="0" aria-label="Quiz progress">
                        <div id="progress-bar" class="progress-bar"></div>
                    </div>
                </div>
                <div class="quiz-timer">
                    <span id="timer-display" aria-live="polite" aria-label="Time remaining">80:00</span>
                </div>
            </div>

            <div class="quiz-content">
                <div id="question-container" class="question-container">
                    <!-- Question content will be dynamically loaded -->
                </div>
                <div id="question-status" class="question-status">
                    <!-- Question status indicators will be shown here for non-study modes -->
                </div>
            </div>

            <div class="quiz-controls" role="toolbar" aria-label="Quiz navigation controls">
                <button id="prev-btn" class="control-btn" disabled aria-label="Go to previous question"
                    tabindex="0">Previous</button>
                <button id="next-btn" class="control-btn" aria-label="Go to next question" tabindex="0">Next</button>
                <button id="submit-btn" class="control-btn primary" aria-label="Submit current answer"
                    tabindex="0">Submit</button>
                <button id="end-quiz-btn" class="control-btn secondary" aria-label="End quiz and see results"
                    tabindex="0">End Quiz</button>
            </div>
        </section>

        <!-- Results View -->
        <section id="results" class="view" role="main" aria-labelledby="results-title">
            <div class="results-container">
                <h2 id="results-title">Quiz Results</h2>
                <div id="results-content" role="region" aria-label="Quiz results and performance metrics">
                    <!-- Results will be dynamically generated -->
                </div>
                <button id="return-dashboard-btn" class="control-btn primary" aria-label="Return to main dashboard"
                    tabindex="0">Return to Dashboard</button>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <p>&copy; 2024 AP Government Study Tool</p>
    </footer>

    <!-- Core classes -->
    <script src="js/question.js"></script>
    <script src="js/error-handler.js"></script>
    <script src="js/confirmation-dialogs.js"></script>
    <script src="js/storage-wrapper.js"></script>
    <script src="js/progress-tracker.js"></script>
    <script src="js/question-manager.js"></script>
    <script src="js/question-bank-loader.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/quiz-engine.js"></script>
    <script src="js/sample-questions.js"></script>

    <!-- UI components -->
    <script src="js/score-chart.js"></script>
    <script src="js/results-display.js"></script>
    <script src="js/scoring-engine.js"></script>

    <!-- Main application -->
    <script src="js/app.js"></script>

    <!-- Initialize the main application -->
    <script>
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                window.app = new App();
                await window.app.init();
                console.log('AP Government Study Tool initialized successfully');
            } catch (error) {
                console.error('Failed to initialize application:', error);
                document.body.innerHTML = `
                    <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
                        <h2 style="color: #D0021B;">Application Failed to Load</h2>
                        <p>The AP Government Study Tool encountered an error during initialization.</p>
                        <p>Please refresh the page to try again.</p>
                        <button onclick="window.location.reload()" style="padding: 10px 20px; background: #4A90E2; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Refresh Page
                        </button>
                    </div>
                `;
            }
        });
    </script>
</body>

</html>